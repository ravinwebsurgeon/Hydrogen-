import{b as f,c as A}from"/build/_shared/chunk-LGV3BFFV.js";import{a as N}from"/build/_shared/chunk-LQ3E66PR.js";import{b as y,c as h,e as u,f as g}from"/build/_shared/chunk-MO733K6J.js";import{a as G,l as C,x as p}from"/build/_shared/chunk-PORSORIO.js";import{c as m}from"/build/_shared/chunk-Q3IECNXJ.js";var n=m(p(),1);function k({layout:e,line:i}){let{id:o,merchandise:r}=i,{product:d,title:c,image:l,selectedOptions:s}=r,q=N(d.handle,s),{close:D}=f();return(0,n.jsxs)("li",{className:"cart-line",children:[l&&(0,n.jsx)(h,{alt:c,aspectRatio:"1/1",data:l,height:100,loading:"lazy",width:100}),(0,n.jsxs)("div",{children:[(0,n.jsx)(C,{prefetch:"intent",to:q,onClick:()=>{e==="aside"&&D()},children:(0,n.jsx)("p",{children:(0,n.jsx)("strong",{children:d.title})})}),(0,n.jsx)(A,{price:i?.cost?.totalAmount}),(0,n.jsx)("ul",{children:s.map(b=>(0,n.jsx)("li",{children:(0,n.jsxs)("small",{children:[b.name,": ",b.value]})},b.name))}),(0,n.jsx)(S,{line:i})]})]},o)}function S({line:e}){if(!e||typeof e?.quantity>"u")return null;let{id:i,quantity:o,isOptimistic:r}=e,d=Number(Math.max(0,o-1).toFixed(0)),c=Number((o+1).toFixed(0));return(0,n.jsxs)("div",{className:"cart-line-quantity",children:[(0,n.jsxs)("small",{children:["Quantity: ",o," \xA0\xA0"]}),(0,n.jsx)(U,{lines:[{id:i,quantity:d}],children:(0,n.jsx)("button",{"aria-label":"Decrease quantity",disabled:o<=1||!!r,name:"decrease-quantity",value:d,children:(0,n.jsx)("span",{children:"\u2212 "})})}),"\xA0",(0,n.jsx)(U,{lines:[{id:i,quantity:c}],children:(0,n.jsx)("button",{"aria-label":"Increase quantity",name:"increase-quantity",value:c,disabled:!!r,children:(0,n.jsx)("span",{children:"+"})})}),"\xA0",(0,n.jsx)(O,{lineIds:[i],disabled:!!r})]})}function O({lineIds:e,disabled:i}){return(0,n.jsx)(u,{route:"/cart",action:u.ACTIONS.LinesRemove,inputs:{lineIds:e},children:(0,n.jsx)("button",{disabled:i,type:"submit",children:"Remove"})})}function U({children:e,lines:i}){return(0,n.jsx)(u,{route:"/cart",action:u.ACTIONS.LinesUpdate,inputs:{lines:i},children:e})}var v=m(G(),1),t=m(p(),1);function I({cart:e,layout:i}){return(0,t.jsxs)("div",{"aria-labelledby":"cart-summary",className:i==="page"?"cart-summary-page":"cart-summary-aside",children:[(0,t.jsx)("h4",{children:"Totals"}),(0,t.jsxs)("dl",{className:"cart-subtotal",children:[(0,t.jsx)("dt",{children:"Subtotal"}),(0,t.jsx)("dd",{children:e.cost?.subtotalAmount?.amount?(0,t.jsx)(y,{data:e.cost?.subtotalAmount}):"-"})]}),(0,t.jsx)(x,{discountCodes:e.discountCodes}),(0,t.jsx)(B,{giftCardCodes:e.appliedGiftCards}),(0,t.jsx)(R,{checkoutUrl:e.checkoutUrl})]})}function R({checkoutUrl:e}){return e?(0,t.jsxs)("div",{children:[(0,t.jsx)("a",{href:e,target:"_self",children:(0,t.jsx)("p",{children:"Continue to Checkout \u2192"})}),(0,t.jsx)("br",{})]}):null}function x({discountCodes:e}){let i=e?.filter(o=>o.applicable)?.map(({code:o})=>o)||[];return(0,t.jsxs)("div",{children:[(0,t.jsx)("dl",{hidden:!i.length,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{children:"Discount(s)"}),(0,t.jsx)(F,{children:(0,t.jsxs)("div",{className:"cart-discount",children:[(0,t.jsx)("code",{children:i?.join(", ")}),"\xA0",(0,t.jsx)("button",{children:"Remove"})]})})]})}),(0,t.jsx)(F,{discountCodes:i,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"text",name:"discountCode",placeholder:"Discount code"}),"\xA0",(0,t.jsx)("button",{type:"submit",children:"Apply"})]})})]})}function F({discountCodes:e,children:i}){return(0,t.jsx)(u,{route:"/cart",action:u.ACTIONS.DiscountCodesUpdate,inputs:{discountCodes:e||[]},children:i})}function B({giftCardCodes:e}){let i=(0,v.useRef)([]),o=(0,v.useRef)(null),r=e?.map(({lastCharacters:l})=>`***${l}`)||[];function d(l){let s=l.replace(/\s/g,"");i.current.includes(s)||i.current.push(s),o.current.value=""}function c(){i.current=[]}return(0,t.jsxs)("div",{children:[(0,t.jsx)("dl",{hidden:!r.length,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{children:"Applied Gift Card(s)"}),(0,t.jsx)(L,{children:(0,t.jsxs)("div",{className:"cart-discount",children:[(0,t.jsx)("code",{children:r?.join(", ")}),"\xA0",(0,t.jsx)("button",{onSubmit:()=>c,children:"Remove"})]})})]})}),(0,t.jsx)(L,{giftCardCodes:i.current,saveAppliedCode:d,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"text",name:"giftCardCode",placeholder:"Gift card code",ref:o}),"\xA0",(0,t.jsx)("button",{type:"submit",children:"Apply"})]})})]})}function L({giftCardCodes:e,saveAppliedCode:i,children:o}){return(0,t.jsx)(u,{route:"/cart",action:u.ACTIONS.GiftCardCodesUpdate,inputs:{giftCardCodes:e||[]},children:r=>{let d=r.formData?.get("giftCardCode");return d&&i&&i(d),o}})}var a=m(p(),1);function X({layout:e,cart:i}){let o=g(i),r=Boolean(o?.lines?.nodes?.length||0),c=`cart-main ${o&&Boolean(o?.discountCodes?.filter(s=>s.applicable)?.length)?"with-discount":""}`,l=o?.totalQuantity>0;return(0,a.jsxs)("div",{className:c,children:[(0,a.jsx)(w,{hidden:r,layout:e}),(0,a.jsxs)("div",{className:"cart-details",children:[(0,a.jsx)("div",{"aria-labelledby":"cart-lines",children:(0,a.jsx)("ul",{children:(o?.lines?.nodes??[]).map(s=>(0,a.jsx)(k,{line:s,layout:e},s.id))})}),l&&(0,a.jsx)(I,{cart:o,layout:e})]})]})}function w({hidden:e=!1}){let{close:i}=f();return(0,a.jsxs)("div",{hidden:e,children:[(0,a.jsx)("br",{}),(0,a.jsx)("p",{children:"Looks like you haven\u2019t added anything yet, let\u2019s get you started!"}),(0,a.jsx)("br",{}),(0,a.jsx)(C,{to:"/collections",onClick:i,prefetch:"viewport",children:"Continue shopping \u2192"})]})}export{X as a};
