import{r as u,j as e,F as j,L as h,u as x}from"./components-7YnbHHm3.js";import{z as f,j as v}from"./index-1JpHDT0i.js";import{u as o}from"./search-DOeYwaXi.js";import{I as y}from"./Image-CMjLZVJT.js";import{M as P}from"./Money-DPx7cSxV.js";function k({children:t,...r}){const s=u.useRef(null);return g(s),typeof t!="function"?null:e.jsx(j,{method:"get",...r,children:t({inputRef:s})})}function g(t){u.useEffect(()=>{function r(s){var n,i;s.key==="k"&&s.metaKey&&(s.preventDefault(),(n=t.current)==null||n.focus()),s.key==="Escape"&&((i=t.current)==null||i.blur())}return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[t])}function c({term:t,result:r,children:s}){return r!=null&&r.total?s({...r.items,term:t}):null}c.Articles=p;c.Pages=S;c.Products=b;c.Empty=E;function p({term:t,articles:r}){var s;return r!=null&&r.nodes.length?e.jsxs("div",{className:"search-result",children:[e.jsx("h2",{children:"Articles"}),e.jsx("div",{children:(s=r==null?void 0:r.nodes)==null?void 0:s.map(n=>{const i=o({baseUrl:`/blogs/${n.handle}`,trackingParams:n.trackingParameters,term:t});return e.jsx("div",{className:"search-results-item",children:e.jsx(h,{prefetch:"intent",to:i,children:n.title})},n.id)})}),e.jsx("br",{})]}):null}function S({term:t,pages:r}){var s;return r!=null&&r.nodes.length?e.jsxs("div",{className:"search-result",children:[e.jsx("h2",{children:"Pages"}),e.jsx("div",{children:(s=r==null?void 0:r.nodes)==null?void 0:s.map(n=>{const i=o({baseUrl:`/pages/${n.handle}`,trackingParams:n.trackingParameters,term:t});return e.jsx("div",{className:"search-results-item",children:e.jsx(h,{prefetch:"intent",to:i,children:n.title})},n.id)})}),e.jsx("br",{})]}):null}function b({term:t,products:r}){return r!=null&&r.nodes.length?e.jsxs("div",{className:"search-result",children:[e.jsx("h2",{children:"Products"}),e.jsx(f,{connection:r,children:({nodes:s,isLoading:n,NextLink:i,PreviousLink:l})=>{const d=s.map(a=>{const m=o({baseUrl:`/products/${a.handle}`,trackingParams:a.trackingParameters,term:t});return e.jsx("div",{className:"search-results-item",children:e.jsxs(h,{prefetch:"intent",to:m,children:[a.variants.nodes[0].image&&e.jsx(y,{data:a.variants.nodes[0].image,alt:a.title,width:50}),e.jsxs("div",{children:[e.jsx("p",{children:a.title}),e.jsx("small",{children:e.jsx(P,{data:a.variants.nodes[0].price})})]})]})},a.id)});return e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(l,{children:n?"Loading...":e.jsx("span",{children:"↑ Load previous"})})}),e.jsxs("div",{children:[d,e.jsx("br",{})]}),e.jsx("div",{children:e.jsx(i,{children:n?"Loading...":e.jsx("span",{children:"Load more ↓"})})})]})}}),e.jsx("br",{})]}):null}function E(){return e.jsx("p",{children:"No results, try a different search."})}const F=()=>[{title:"Hydrogen | Search"}];function A(){const{type:t,term:r,result:s,error:n}=x();return t==="predictive"?null:e.jsxs("div",{className:"search",children:[e.jsx("h1",{children:"Search"}),e.jsx(k,{children:({inputRef:i})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{defaultValue:r,name:"q",placeholder:"Search…",ref:i,type:"search"})," ",e.jsx("button",{type:"submit",children:"Search"})]})}),n&&e.jsx("p",{style:{color:"red"},children:n}),!r||!(s!=null&&s.total)?e.jsx(c.Empty,{}):e.jsx(c,{result:s,term:r,children:({articles:i,pages:l,products:d,term:a})=>e.jsxs("div",{children:[e.jsx(c.Products,{products:d,term:a}),e.jsx(c.Pages,{pages:l,term:a}),e.jsx(c.Articles,{articles:i,term:a})]})}),e.jsx(v.SearchView,{data:{searchTerm:r,searchResults:s}})]})}export{A as default,F as meta};
